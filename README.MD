
# Proyecto Pop Corn

## Resumen de Ejecuci√≥n

Para iniciar el proyecto, siga los pasos a continuaci√≥n:

1. **Configurar la Base de Datos**:
   - Cree una base de datos llamada `pop_corn`.

2. **Configurar Variables de Entorno**:
   - En el directorio `backend`, cree un archivo `.env` con las siguientes variables:
     ```env
     API_PORT=3000
     API_SERVER=localhost
     DB_HOST=localhost
     DB_PORT=5432
     DB_USERNAME=your_db_user
     DB_PASSWORD=your_db_password
     DB_DATABASE=pop_corn
     BASE_SOCKET=http://localhost:3000
     BASE_API=http://localhost:3000/api
     ```
   - En el directorio `frontend`, cree un archivo `.env` con las siguientes variables:
     ```env
     VITE_BASE_API=http://localhost:3000/api
     VITE_BASE_SOCKET=http://localhost:3000
     ```

3. **Instalar Dependencias**:
   - En el directorio principal del proyecto, ejecute:
     ```bash
     cd backend
     npm install
     cd ../frontend
     npm install
     ```

4. **Ejecutar el Proyecto**:
   - Inicie el backend:
     ```bash
     cd backend
     npm run dev
     ```
   - Inicie el frontend:
     ```bash
     cd frontend
     npm run dev
     ```

---

## Backend - API de Venta de Ma√≠z üåΩ

### **Descripci√≥n**
Este proyecto es el backend para un sistema de venta de ma√≠z que utiliza tecnolog√≠as modernas como TypeScript, Node.js, Express y Socket.IO. Est√° dise√±ado para manejar la l√≥gica de negocio, conexiones en tiempo real, y la persistencia de datos en la base de datos.

---

### **Tecnolog√≠as Usadas**
- **Node.js**: Plataforma de ejecuci√≥n para JavaScript en el servidor.
- **TypeScript**: Lenguaje de programaci√≥n tipado para mejorar la calidad del c√≥digo.
- **Express**: Framework web minimalista para manejar rutas y middleware.
- **Socket.IO**: Comunicaci√≥n en tiempo real entre cliente y servidor.
- **TypeORM**: ORM para manejar la base de datos.
- **Swagger**: Generaci√≥n autom√°tica de documentaci√≥n para las APIs.
- **PostgreSQL**: Base de datos relacional.
- **Jest**: Testing para las funcionalidades.

---

### **Estructura de Carpetas**

```plaintext
src/
‚îú‚îÄ‚îÄ config/          # Configuraciones de la base de datos y otros entornos
‚îú‚îÄ‚îÄ constants/       # Constantes globales para el proyecto
‚îú‚îÄ‚îÄ controllers/     # Controladores para manejar las rutas y l√≥gica de negocio
‚îú‚îÄ‚îÄ entities/        # Entidades de la base de datos (TypeORM)
‚îú‚îÄ‚îÄ repositories/    # L√≥gica para interactuar con la base de datos
‚îú‚îÄ‚îÄ routes/          # Rutas de la API
‚îú‚îÄ‚îÄ services/        # L√≥gica de negocio y servicios
‚îú‚îÄ‚îÄ sockets/         # Manejadores de eventos de Socket.IO
‚îú‚îÄ‚îÄ app.ts           # Configuraci√≥n principal de Express
‚îú‚îÄ‚îÄ server.ts        # Configuraci√≥n de Socket.IO y servidor
```

---

### **C√≥mo Iniciar el Proyecto**

#### **1. Clonar el repositorio**
```bash
git clone https://github.com/Navau/bob-corn-base-labs
cd backend
```

#### **2. Instalar dependencias**
Aseg√∫rate de tener `Node.js` y `npm` instalados.
```bash
npm install
```

#### **3. Configurar variables de entorno**
Crea un archivo `.env` en la ra√≠z del proyecto basado en el siguiente ejemplo:
```plaintext
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=navau
DATABASE_NAME=bob_corn
API_SERVER=localhost
API_PORT=3000
```

#### **4. Generar la base de datos**
Aseg√∫rate de tener PostgreSQL instalado y corriendo. Usa TypeORM para sincronizar las entidades:
```bash
npm run typeorm migration:run
```
#### **4. Generar la Base de Datos üõ†Ô∏è**
¬°Aseg√∫rate de que PostgreSQL est√© instalado y en funcionamiento! üöÄ Si encuentras problemas, crea manualmente la base de datos localmente con el nombre: `bob_corn`.


#### **5. Iniciar el servidor**
```bash
npm start
```

El backend estar√° corriendo en `http://localhost:3000/api`.

---

### **Descripci√≥n de Carpetas**

#### **1. config/**
Contiene configuraciones globales como la conexi√≥n a la base de datos.

#### **2. constants/**
Define constantes globales que son utilizadas en todo el proyecto.

#### **3. controllers/**
Contiene los controladores que gestionan las rutas y conectan con los servicios.

#### **4. entities/**
Define las entidades que representan las tablas de la base de datos.

#### **5. repositories/**
Contiene la l√≥gica de interacci√≥n directa con la base de datos.

#### **6. routes/**
Define las rutas disponibles en la API.

#### **7. services/**
Implementa la l√≥gica de negocio como validaciones, reglas de negocio, y servicios espec√≠ficos.

#### **8. sockets/**
Contiene los manejadores de eventos de Socket.IO para la comunicaci√≥n en tiempo real.

#### **9. app.ts**
Archivo principal para configurar middlewares, rutas y Swagger.

#### **10. server.ts**
Inicializa el servidor HTTP, conecta con Socket.IO y configura los eventos.

---

### **Swagger - Documentaci√≥n**
La documentaci√≥n de la API se genera autom√°ticamente con Swagger. Una vez que el servidor est√© corriendo, puedes acceder a la documentaci√≥n en:
```
http://localhost:3000/api
```

---

### **Scripts Disponibles**

#### **Iniciar el servidor**
```bash
npm start
```

#### **Iniciar en modo desarrollo**
```bash
npm run dev
```

#### **Correr tests**
```bash
npm run test
```

---

### **Endpoints Disponibles**

#### **1. POST /api/corn/buy**
Registra una compra de ma√≠z.

#### **2. GET /api/corn/paginated**
Obtiene una lista de compras paginada.

#### **3. GET /api/corn/all**
Obtiene todas las compras de un cliente espec√≠fico.

#### **4. Socket.IO Eventos**
- **buyCorn**: Maneja la compra en tiempo real.

---

### **Pruebas**
Las pruebas est√°n escritas con Jest. Para ejecutarlas:
```bash
npm test
```

---

### **Contribuciones**
Si deseas contribuir al proyecto:
1. Crea un fork del repositorio.
2. Crea una nueva rama (`git checkout -b feature/nueva-funcionalidad`).
3. Realiza tus cambios y haz un commit (`git commit -m "Agrega nueva funcionalidad"`).
4. Sube los cambios a tu fork (`git push origin feature/nueva-funcionalidad`).
5. Crea un Pull Request.

---



# Frontend - Sistema de Compra de Ma√≠z üåΩ

## Introducci√≥n
Este es el frontend del sistema de compra de ma√≠z que permite a los usuarios realizar compras, visualizar registros y gestionar eventos en tiempo real a trav√©s de una integraci√≥n con Socket.IO. El proyecto utiliza **React** y **Vite** para la construcci√≥n del cliente, junto con **TailwindCSS** para el dise√±o.

---

## Tecnolog√≠as Usadas
- **React**: Biblioteca para la construcci√≥n de interfaces de usuario.
- **Vite**: Herramienta r√°pida para construir proyectos frontend.
- **TypeScript**: Tipado est√°tico para mayor robustez del c√≥digo.
- **TailwindCSS**: Framework de dise√±o CSS.
- **Socket.IO**: Comunicaci√≥n en tiempo real entre cliente y servidor.
- **Zod**: Validaciones de formularios.
- **Axios**: Cliente HTTP para consumir APIs.
- **JS Cookie**: Manejo de cookies en el cliente.

---

## Estructura del Proyecto
```
src/
‚îú‚îÄ‚îÄ api/                # Servicios para consumir APIs
‚îú‚îÄ‚îÄ assets/             # Recursos est√°ticos como im√°genes o √≠conos
‚îú‚îÄ‚îÄ components/         # Componentes reutilizables de la UI
‚îú‚îÄ‚îÄ constants/          # Variables y configuraciones globales
‚îú‚îÄ‚îÄ hooks/              # Hooks personalizados
‚îú‚îÄ‚îÄ interfaces/         # Definiciones de tipos e interfaces
‚îú‚îÄ‚îÄ lib/                # Configuraci√≥n de librer√≠as externas
‚îú‚îÄ‚îÄ pages/              # Vistas principales del proyecto
‚îú‚îÄ‚îÄ utils/              # Funciones auxiliares y helpers
‚îú‚îÄ‚îÄ App.tsx             # Componente principal de la aplicaci√≥n
‚îú‚îÄ‚îÄ main.tsx            # Punto de entrada principal
‚îú‚îÄ‚îÄ index.css           # Estilos globales
‚îî‚îÄ‚îÄ vite-env.d.ts       # Configuraci√≥n de Vite para TypeScript
```

---

## Instalaci√≥n
1. Clonar el repositorio:
    ```bash
    git clone https://github.com/Navau/bob-corn-base-labs
    cd frontend
    ```

2. Instalar dependencias:
    ```bash
    npm install
    ```

3. Configurar variables de entorno:
    Crear un archivo `.env` en la ra√≠z del proyecto con el siguiente contenido:
    ```env
    VITE_BASE_API=http://localhost:3000/api
    VITE_BASE_SOCKET=http://localhost:3000
    ```

4. Iniciar el servidor de desarrollo:
    ```bash
    npm run dev
    ```

---

## Uso
### Scripts Disponibles
- `npm run dev`: Inicia el servidor de desarrollo.
- `npm run build`: Genera una versi√≥n optimizada para producci√≥n.
- `npm run preview`: Previsualiza la versi√≥n optimizada de producci√≥n.

### Funcionalidades Principales
1. **Comprar Ma√≠z:**
   - Los usuarios pueden realizar compras ingresando su ID en un formulario.
   - Cada compra actualiza los registros en tiempo real usando Socket.IO.

2. **Visualizaci√≥n de Registros:**
   - Se muestran todos los registros de compras en una tabla interactiva.
   - Incluye paginaci√≥n y scroll interno.

3. **Validaciones de Formularios:**
   - Uso de `zod` para garantizar que los datos ingresados sean v√°lidos.

4. **Integraci√≥n en Tiempo Real:**
   - Comunicaci√≥n bidireccional con el servidor usando Socket.IO.

---

## Directorio de Inter√©s
### `/api`
Contiene los servicios para consumir las APIs del backend.
- `corn.api.ts`: Servicios relacionados con las operaciones de compra y obtenci√≥n de registros.

### `/components`
Componentes reutilizables para la UI.
- **Custom:**
  - `FormCorn`: Formulario para realizar compras.
  - `ListBuysCorn`: Tabla para listar registros.
  - `HeaderCorn`: Cabecera principal.

### `/hooks`
Hooks personalizados para manejar la l√≥gica del cliente.
- `useCorn`: Maneja las compras y la obtenci√≥n de registros.
- `useToast`: Manejo de notificaciones.

### `/constants`
Variables y configuraciones globales.
- `corn.constants.ts`: Contiene configuraciones como el l√≠mite de compras por minuto.

---

## Consideraciones
- **Sockets:** Los eventos de compra se manejan en tiempo real a trav√©s de Socket.IO. Se inicializa el socket en el archivo `main.tsx` y se propaga a los componentes que lo necesiten.
- **Cookies:** El ID del cliente se guarda en cookies para persistencia entre sesiones.
- **TailwindCSS:** Utiliza clases utilitarias para un dise√±o r√°pido y limpio.

---

## Pr√≥ximos Pasos
1. **Autenticaci√≥n:** Integrar un sistema de autenticaci√≥n para manejar m√∫ltiples usuarios.
2. **Optimizaci√≥n:** Mejorar la gesti√≥n de estado usando una librer√≠a como Zustand o Redux.
3. **Pruebas:** Implementar pruebas unitarias con Jest y React Testing Library.
4. **Despliegue:** Configurar el proyecto para ser desplegado en una plataforma como Vercel o Netlify.

---


### **Autor**
Desarrollado por JOSE MANUEL GUTIERREZ NAVARRO üåΩ


